<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificación - Asoc. Estudiantes Trabajo Social</title>
    
    <!-- Librerías Externas -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Estilos CSS incorporados para asegurar que carguen correctamente */
        body { 
            font-family: 'Inter', sans-serif; 
        }

        /* Animación de entrada suave */
        .animate-fade-in { 
            animation: fadeIn 0.5s ease-out; 
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Patrón decorativo de fondo */
        .certificate-pattern {
            background-color: #ffffff;
            background-image: radial-gradient(#312e81 0.5px, transparent 0.5px), radial-gradient(#312e81 0.5px, #ffffff 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            opacity: 0.05;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="bg-indigo-900 text-white p-4 shadow-md">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-users-rectangle text-xl"></i>
                <span class="font-bold text-lg md:text-xl">Asoc. Estudiantes Trabajo Social</span>
            </div>
            <a href="#" class="text-indigo-200 hover:text-white text-sm">Volver al sitio</a>
        </div>
    </nav>

    <!-- Contenido Principal -->
    <main class="flex-grow flex items-center justify-center p-4 relative overflow-hidden">
        <!-- Decoración de fondo -->
        <div class="absolute inset-0 certificate-pattern pointer-events-none"></div>

        <div class="bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden z-10 border border-slate-100">
            <!-- Cabecera -->
            <div class="bg-white p-8 pb-6 text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-indigo-50 text-indigo-900 mb-4">
                    <i class="fa-solid fa-address-card text-2xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-slate-800 mb-2">Verificar Asistencia</h1>
                <p class="text-slate-500 text-sm">Ingresa tu Nombre y Apellido completo para validar tu participación en el taller.</p>
            </div>

            <!-- Formulario -->
            <div class="px-8 pb-8">
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fa-solid fa-user text-slate-400"></i>
                    </div>
                    <input type="text" id="searchInput" 
                        class="block w-full pl-10 pr-3 py-3 border border-slate-300 rounded-lg leading-5 bg-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition duration-150 ease-in-out" 
                        placeholder="Ej: Ignacio Loja">
                </div>
                
                <button onclick="verifyAttendance()" 
                    class="mt-4 w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-900 hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors">
                    Verificar Asistencia
                </button>
            </div>

            <!-- Resultados -->
            <div id="resultArea" class="hidden border-t border-slate-100 bg-slate-50 p-6 animate-fade-in">
                <!-- Se llena con JS -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-slate-400 text-xs">
        &copy; 2024 Asociación de Estudiantes de Trabajo Social.
    </footer>

    <!-- Script JS incorporado -->
    <script>
        // --- Base de datos de asistentes ---
        const attendeesDB = [
            {
                name: "Ignacio Loja",
                workshop: "Taller: Procesos de Adopción en el Trabajo Social",
                date: "20 Nov 2024",
                status: "verified"
            },
            {
                name: "Juan Pérez",
                workshop: "Taller: Procesos de Adopción en el Trabajo Social",
                date: "20 Nov 2024",
                status: "verified"
            },
            {
                name: "María Gómez",
                workshop: "Taller: Procesos de Adopción en el Trabajo Social",
                date: "20 Nov 2024",
                status: "verified"
            },
            {
                name: "Carlos Ruiz",
                workshop: "Taller: Procesos de Adopción en el Trabajo Social",
                date: "20 Nov 2024",
                status: "pending"
            }
        ];

        // --- Función principal de verificación ---
        function verifyAttendance() {
            const input = document.getElementById('searchInput').value.trim().toLowerCase();
            const resultArea = document.getElementById('resultArea');
            
            // Limpiar resultados anteriores
            resultArea.innerHTML = '';
            resultArea.classList.remove('hidden');

            if (!input) {
                showError("Por favor, ingresa un nombre para buscar.");
                return;
            }

            // Mostrar mensaje de carga
            resultArea.innerHTML = '<div class="text-center text-slate-500"><i class="fa-solid fa-spinner fa-spin mr-2"></i> Buscando en registros...</div>';

            setTimeout(() => {
                // Búsqueda (insensible a mayúsculas/minúsculas)
                const attendee = attendeesDB.find(p => 
                    p.name.toLowerCase().includes(input)
                );

                if (attendee) {
                    showSuccess(attendee);
                } else {
                    showNotFound();
                }
            }, 600);
        }

        // --- Mostrar éxito ---
        function showSuccess(person) {
            const resultArea = document.getElementById('resultArea');
            
            let statusBadge = '';
            if (person.status === 'verified') {
                statusBadge = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"><i class="fa-solid fa-circle-check mr-1"></i> Asistencia Confirmada</span>`;
            } else if (person.status === 'pending') {
                statusBadge = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"><i class="fa-solid fa-clock mr-1"></i> En Revisión</span>`;
            }

            resultArea.innerHTML = `
                <div class="text-center animate-fade-in">
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-3">
                        <i class="fa-solid fa-check text-green-600 text-xl"></i>
                    </div>
                    <h3 class="text-lg leading-6 font-bold text-slate-900">${person.name}</h3>
                    <div class="mt-1">${statusBadge}</div>
                    
                    <div class="mt-4 text-left bg-white p-3 rounded-lg border border-slate-200 text-sm">
                        <div class="flex flex-col gap-2">
                            <div class="flex justify-between items-start">
                                <span class="text-slate-500 whitespace-nowrap mr-2">Evento:</span>
                                <span class="font-medium text-slate-700 text-right leading-tight">${person.workshop}</span>
                            </div>
                            <div class="flex justify-between border-t border-slate-100 pt-2">
                                <span class="text-slate-500">Fecha:</span>
                                <span class="font-medium text-slate-700">${person.date}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 text-xs text-slate-400">
                        Registro oficial de la Asociación de Estudiantes.
                    </div>
                </div>
            `;
        }

        // --- Mostrar no encontrado ---
        function showNotFound() {
            const resultArea = document.getElementById('resultArea');
            resultArea.innerHTML = `
                <div class="text-center animate-fade-in">
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-3">
                        <i class="fa-solid fa-user-slash text-red-600 text-xl"></i>
                    </div>
                    <h3 class="text-lg leading-6 font-medium text-slate-900">No encontrado</h3>
                    <p class="mt-2 text-sm text-slate-500">
                        No encontramos registros de asistencia con ese nombre para este taller.
                    </p>
                    <div class="mt-4 text-xs text-slate-400">
                        Asegúrate de escribir el nombre y apellido tal como te registraste en la lista.
                    </div>
                </div>
            `;
        }

        // --- Mostrar error ---
        function showError(msg) {
            const resultArea = document.getElementById('resultArea');
            resultArea.innerHTML = `<div class="text-red-500 text-center text-sm"><i class="fa-solid fa-circle-exclamation mr-1"></i> ${msg}</div>`;
        }

        // Event listener para tecla Enter
        document.getElementById('searchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                verifyAttendance();
            }
        });
    </script>
</body>